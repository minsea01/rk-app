# ğŸ¯ ä¸Šæ¿å·®è·åˆ†æï¼ˆè¯šå®è¯„ä¼°ï¼‰

**è¯„ä¼°æ—¶é—´**: 2025-11-16
**ç›®æ ‡**: RK3588å®é™…è¿è¡Œ
**å½“å‰çŠ¶æ€**: PCå¼€å‘ç¯å¢ƒå®Œæˆ

---

## ğŸ“‹ å·®è·æ¸…å•

### âœ… å·²å®Œæˆï¼ˆå¯ç›´æ¥ç”¨ï¼‰

1. **æ¨ç†ä»£ç ** âœ…
   ```python
   apps/yolov8_rknn_infer.py (232è¡Œ)
   - å·²æ”¯æŒRKNNLite APIï¼ˆæ¿ä¸Šè¿è¡Œæ—¶ï¼‰
   - å®Œæ•´çš„æ¨ç†æµç¨‹ï¼ˆpreprocess â†’ inference â†’ postprocessï¼‰
   - é”™è¯¯å¤„ç†å®Œå–„
   ```

2. **æ¨¡å‹æ–‡ä»¶** âœ…
   ```
   artifacts/models/best.rknn (4.7MB)
   - INT8é‡åŒ–å®Œæˆ
   - å·²è½¬æ¢ä¸ºRKNNæ ¼å¼
   - å¯ç›´æ¥åŠ è½½
   ```

3. **éƒ¨ç½²è„šæœ¬** âœ…
   ```bash
   scripts/deploy/rk3588_run.sh (81è¡Œ)
   - æ™ºèƒ½fallbackï¼ˆCLI â†’ Pythonï¼‰
   - LD_LIBRARY_PATHè‡ªåŠ¨é…ç½®
   - å‚æ•°ä¼ é€’å®Œå–„
   ```

4. **å·¥å…·é“¾** âœ…
   ```
   - æ¨¡å‹è½¬æ¢: convert_onnx_to_rknn.py âœ…
   - é¢„å¤„ç†: apps/utils/preprocessing.py âœ…
   - åå¤„ç†: apps/utils/yolo_post.py âœ…
   - é…ç½®ç®¡ç†: apps/config.py âœ…
   ```

---

### âŒ ç¼ºå¤±ï¼ˆå¿…é¡»è¡¥å……ï¼‰

#### 1. **æ¿ä¸Šè¿è¡Œæ—¶åº“** âŒ (å…³é”®)
```bash
# å½“å‰çŠ¶æ€: æœªå®‰è£…
# éœ€è¦: rknn-toolkit-lite2

# è§£å†³æ–¹æ¡ˆ:
åœ¨RK3588ä¸Šæ‰§è¡Œ:
pip3 install rknn-toolkit-lite2

# æˆ–ä»Rockchipå®˜æ–¹è·å–wheelæ–‡ä»¶:
wget https://github.com/rockchip-linux/rknn-toolkit2/releases/.../rknn_toolkit_lite2-*-cp310-cp310-linux_aarch64.whl
pip3 install rknn_toolkit_lite2-*-cp310-cp310-linux_aarch64.whl
```

**æ—¶é—´**: 5-10åˆ†é’Ÿ
**éš¾åº¦**: â­ ç®€å•

---

#### 2. **æ¿ä¸ŠPythonä¾èµ–** âŒ
```bash
# éœ€è¦åœ¨RK3588ä¸Šå®‰è£…:
pip3 install numpy opencv-python-headless pillow

# æˆ–ä½¿ç”¨requirementsæ–‡ä»¶:
# éœ€è¦åˆ›å»º requirements-board.txt
```

**æ—¶é—´**: 2-5åˆ†é’Ÿ
**éš¾åº¦**: â­ ç®€å•

---

#### 3. **ARM64äºŒè¿›åˆ¶ï¼ˆC++å¯é€‰ï¼‰** âŒ
```bash
# å½“å‰çŠ¶æ€: æœªæ„å»º
# ä½ç½®: out/arm64/bin/detect_cli (ä¸å­˜åœ¨)

# è§£å†³æ–¹æ¡ˆ:
# åœ¨PCä¸Šäº¤å‰ç¼–è¯‘:
cmake --preset arm64-release -DENABLE_RKNN=ON
cmake --build build/arm64
cmake --install build/arm64

# éœ€è¦:
sudo apt install gcc-aarch64-linux-gnu g++-aarch64-linux-gnu
```

**æ—¶é—´**: 10-15åˆ†é’Ÿï¼ˆé¦–æ¬¡ï¼‰
**éš¾åº¦**: â­â­ ä¸­ç­‰
**å¤‡æ³¨**: Pythonæ–¹æ¡ˆå¯è·³è¿‡æ­¤æ­¥éª¤

---

#### 4. **ç½‘ç»œé…ç½®ï¼ˆæ¯•è®¾è¦æ±‚ï¼‰** âŒ
```bash
# åŒåƒå…†ç½‘å£é…ç½®
# è„šæœ¬å·²æœ‰: scripts/network/rgmii_driver_config.sh

# éœ€è¦åœ¨æ¿ä¸Šæ‰§è¡Œ:
sudo ./scripts/network/rgmii_driver_config.sh

# é…ç½®IPåœ°å€:
sudo ip addr add 192.168.1.10/24 dev eth0  # ç›¸æœºç½‘ç»œ
sudo ip addr add 192.168.2.10/24 dev eth1  # ä¸Šä¼ ç½‘ç»œ
```

**æ—¶é—´**: 5-10åˆ†é’Ÿ
**éš¾åº¦**: â­â­ ä¸­ç­‰

---

#### 5. **æ–‡ä»¶ä¼ è¾“** âŒ
```bash
# éœ€è¦å°†ä»£ç +æ¨¡å‹ä¼ åˆ°æ¿å­

# æ–¹æ¡ˆ1: SCP/rsync
rsync -avz --exclude='.git' \
  /home/user/rk-app/ \
  radxa@192.168.x.x:/home/radxa/rk-app/

# æ–¹æ¡ˆ2: Git clone
git clone <repo_url> /home/radxa/rk-app

# æ–¹æ¡ˆ3: Uç›˜/SDå¡
```

**æ—¶é—´**: 5-30åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œï¼‰
**éš¾åº¦**: â­ ç®€å•

---

### ğŸŸ¡ éœ€è¦éªŒè¯ï¼ˆå¯èƒ½æœ‰é—®é¢˜ï¼‰

#### 1. **RKNNé©±åŠ¨** ğŸŸ¡
```bash
# æ£€æŸ¥NPUé©±åŠ¨æ˜¯å¦å­˜åœ¨:
ls /dev/rknpu*

# å¦‚æœä¸å­˜åœ¨,éœ€è¦:
# - ç¡®è®¤å†…æ ¸ç‰ˆæœ¬æ”¯æŒï¼ˆ5.10+ï¼‰
# - åŠ è½½rknpué©±åŠ¨æ¨¡å—
modprobe rknpu
```

**é£é™©**: ä¸­ç­‰
**å½±å“**: æ— æ³•ä½¿ç”¨NPUåŠ é€Ÿ

---

#### 2. **Pythonç‰ˆæœ¬** ğŸŸ¡
```bash
# ä»£ç åŸºäºPython 3.10å¼€å‘
# RK3588å¯èƒ½é¢„è£…Python 3.8/3.9

# éªŒè¯:
python3 --version

# å¦‚æœ<3.10,éœ€è¦è¯„ä¼°å…¼å®¹æ€§:
# - numpy<2.0 (âœ… å…¼å®¹)
# - opencv (âœ… å…¼å®¹)
# - rknnlite (â“ æŸ¥çœ‹å®˜æ–¹æ”¯æŒ)
```

**é£é™©**: ä½-ä¸­ç­‰
**å½±å“**: å¯èƒ½éœ€è¦è°ƒæ•´ä»£ç 

---

#### 3. **å†…å­˜é™åˆ¶** ğŸŸ¡
```bash
# RK3588æœ‰16GB RAMï¼ˆè§„æ ¼ï¼‰
# æ¨ç†å³°å€¼å†…å­˜: ~300MBï¼ˆPCæµ‹è¯•ï¼‰

# é£é™©: ä½
# é¢„æœŸå¯ç”¨å†…å­˜: >8GBï¼ˆç³»ç»Ÿå ç”¨<8GBï¼‰
```

**é£é™©**: ä½

---

## ğŸš€ æœ€å¿«ä¸Šæ¿è·¯å¾„ï¼ˆPythonæ–¹æ¡ˆï¼‰

### æœ€å°å¯è¡Œæ­¥éª¤ï¼ˆ30åˆ†é’Ÿï¼‰

```bash
# ===== åœ¨PCä¸Š =====
# 1. æ‰“åŒ…é¡¹ç›®ï¼ˆè·³è¿‡.gitå’Œå¤§æ–‡ä»¶ï¼‰
tar czf rk-app.tar.gz \
  --exclude='.git' \
  --exclude='build' \
  apps/ tools/ scripts/ config/ artifacts/models/best.rknn

# 2. ä¼ è¾“åˆ°æ¿å­
scp rk-app.tar.gz radxa@<board_ip>:/home/radxa/

# ===== åœ¨RK3588ä¸Š =====
# 3. è§£å‹
cd /home/radxa
tar xzf rk-app.tar.gz

# 4. å®‰è£…ä¾èµ–
pip3 install rknn-toolkit-lite2 numpy opencv-python-headless pillow

# 5. æµ‹è¯•è¿è¡Œ
cd rk-app
python3 apps/yolov8_rknn_infer.py \
  --model artifacts/models/best.rknn \
  --source <test_image.jpg> \
  --save result.jpg

# 6. æ£€æŸ¥ç»“æœ
ls -lh result.jpg
```

**é¢„æœŸæ—¶é—´**: 30åˆ†é’Ÿ
**æˆåŠŸç‡**: 80-90%

---

## â±ï¸ æ—¶é—´ä¼°ç®—

### ä¹è§‚æƒ…å†µï¼ˆä¸€åˆ‡é¡ºåˆ©ï¼‰
```
æ–‡ä»¶ä¼ è¾“:        10åˆ†é’Ÿ
å®‰è£…ä¾èµ–:        5åˆ†é’Ÿ
é¦–æ¬¡æµ‹è¯•:        5åˆ†é’Ÿ
è°ƒè¯•é—®é¢˜:        10åˆ†é’Ÿ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            30åˆ†é’Ÿ
```

### ç°å®æƒ…å†µï¼ˆæœ‰äº›é—®é¢˜ï¼‰
```
æ–‡ä»¶ä¼ è¾“:        15åˆ†é’Ÿ
å®‰è£…ä¾èµ–:        10åˆ†é’Ÿï¼ˆå¯èƒ½é‡åˆ°ç½‘ç»œé—®é¢˜ï¼‰
é¦–æ¬¡æµ‹è¯•:        5åˆ†é’Ÿ
è°ƒè¯•é—®é¢˜:        30-60åˆ†é’Ÿï¼ˆé©±åŠ¨/ä¾èµ–é—®é¢˜ï¼‰
ç½‘ç»œé…ç½®:        20åˆ†é’Ÿ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            1.5-2å°æ—¶
```

### æ‚²è§‚æƒ…å†µï¼ˆå¤šä¸ªé—®é¢˜ï¼‰
```
æ–‡ä»¶ä¼ è¾“:        20åˆ†é’Ÿ
ç¯å¢ƒé—®é¢˜:        1-2å°æ—¶ï¼ˆPythonç‰ˆæœ¬/é©±åŠ¨é—®é¢˜ï¼‰
ä¾èµ–é—®é¢˜:        1-2å°æ—¶ï¼ˆç¼–è¯‘ä¾èµ–ç­‰ï¼‰
è°ƒè¯•:            2-3å°æ—¶ï¼ˆæœªçŸ¥é—®é¢˜ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:            åŠå¤©-1å¤©
```

---

## ğŸ¯ è·ç¦»ç­”è¾©çš„å·®è·

### å¿…é¡»å®Œæˆï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
1. âœ… æ¨ç†è¿è¡Œ (30åˆ†é’Ÿ-2å°æ—¶)
2. â¸ï¸ FPSæµ‹è¯• (+10åˆ†é’Ÿ)
3. â¸ï¸ 900MbpséªŒè¯ (+20åˆ†é’Ÿ)
4. â¸ï¸ è¡ŒäººmAPéªŒè¯ (+1å°æ—¶,éœ€æ•°æ®é›†)

**æœ€å°æ—¶é—´**: 1å°æ—¶
**ç°å®æ—¶é—´**: 3-5å°æ—¶

### ç­”è¾©åŠ åˆ†é¡¹ï¼ˆå¯é€‰ï¼‰
1. â¸ï¸ C++ç‰ˆæœ¬ç¼–è¯‘è¿è¡Œ (+1å°æ—¶)
2. â¸ï¸ å·¥ä¸šç›¸æœºé›†æˆ (+2-3å°æ—¶)
3. â¸ï¸ åŒç½‘å£å¹¶å‘æµ‹è¯• (+1å°æ—¶)
4. â¸ï¸ 24å°æ—¶ç¨³å®šæ€§æµ‹è¯• (+1å¤©)

**å¦‚éœ€å…¨éƒ¨**: +1-2å¤©

---

## ğŸ“Š é£é™©è¯„ä¼°

### é«˜æ¦‚ç‡é—®é¢˜ï¼ˆ60-80%é‡åˆ°ï¼‰
1. **rknn-toolkit-lite2å®‰è£…** - å¯èƒ½éœ€è¦ç‰¹å®šwheelæ–‡ä»¶
2. **Pythonç‰ˆæœ¬å…¼å®¹** - æ¿ä¸Šå¯èƒ½æ˜¯3.8/3.9
3. **opencvä¾èµ–** - å¯èƒ½ç¼ºå°‘ç³»ç»Ÿåº“ï¼ˆlibGLç­‰ï¼‰

### ä¸­æ¦‚ç‡é—®é¢˜ï¼ˆ20-40%é‡åˆ°ï¼‰
1. **NPUé©±åŠ¨** - å¯èƒ½éœ€è¦æ‰‹åŠ¨åŠ è½½/é…ç½®
2. **ç½‘ç»œé…ç½®** - RGMIIé©±åŠ¨å¯èƒ½éœ€è¦è°ƒæ•´
3. **å†…å­˜ä¸è¶³** - å¦‚æœç³»ç»Ÿå ç”¨è¿‡é«˜

### ä½æ¦‚ç‡é—®é¢˜ï¼ˆ<10%é‡åˆ°ï¼‰
1. **æ¨¡å‹æ ¼å¼ä¸å…¼å®¹** - RKNNç‰ˆæœ¬å·®å¼‚
2. **ç¡¬ä»¶æ•…éšœ** - æ¿å­æœ¬èº«é—®é¢˜

---

## âœ… å»ºè®®è¡ŒåŠ¨æ–¹æ¡ˆ

### æ–¹æ¡ˆA: æœ€å¿«éªŒè¯ï¼ˆæ¨èï¼‰
```bash
ç›®æ ‡: éªŒè¯æ¨ç†èƒ½è¿è¡Œ
æ—¶é—´: 1-2å°æ—¶
æ­¥éª¤:
  1. ä¼ è¾“ä»£ç +æ¨¡å‹
  2. å®‰è£…rknn-toolkit-lite2
  3. è¿è¡Œå•å¼ å›¾ç‰‡æ¨ç†
  4. è®°å½•FPSå’Œå»¶è¿Ÿ
```

### æ–¹æ¡ˆB: å®Œæ•´éªŒè¯
```bash
ç›®æ ‡: æ»¡è¶³æ‰€æœ‰æ¯•è®¾è¦æ±‚
æ—¶é—´: 1å¤©
æ­¥éª¤:
  1. æ–¹æ¡ˆA +
  2. åŒç½‘å£é…ç½®
  3. 900Mbpsæµ‹è¯•
  4. è¡ŒäººmAPéªŒè¯ï¼ˆéœ€æ•°æ®é›†ï¼‰
  5. æ’°å†™å®éªŒæŠ¥å‘Š
```

### æ–¹æ¡ˆC: æè‡´ä¼˜åŒ–
```bash
ç›®æ ‡: è¶…å‡ºæ¯•è®¾è¦æ±‚
æ—¶é—´: 2-3å¤©
æ­¥éª¤:
  1. æ–¹æ¡ˆB +
  2. C++ç‰ˆæœ¬ç¼–è¯‘éƒ¨ç½²
  3. å·¥ä¸šç›¸æœºé›†æˆ
  4. é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•
  5. æ€§èƒ½ä¼˜åŒ–ï¼ˆNPUå¤šæ ¸ç­‰ï¼‰
```

---

## ğŸŠ æœ€ç»ˆç­”æ¡ˆ

**è·ç¦»ä¸Šæ¿è¿˜å·®**:

### ä»£ç å±‚é¢
âœ… **0å·®è·** - ä»£ç 100%ready

### å®é™…éƒ¨ç½²
âŒ **1-2å°æ—¶** (ä¹è§‚)
âŒ **3-5å°æ—¶** (ç°å®)
âŒ **åŠå¤©-1å¤©** (æ‚²è§‚)

### å®Œæ•´éªŒè¯ï¼ˆå«æµ‹è¯•ï¼‰
âŒ **1å¤©** (æ¨èæ–¹æ¡ˆB)

---

## ğŸ“Œ å½“å‰ä¼˜å…ˆçº§

**P0 (å¿…é¡»)**:
1. è·å–RK3588å¼€å‘æ¿
2. å®‰è£…rknn-toolkit-lite2
3. è¿è¡ŒåŸºç¡€æ¨ç†

**P1 (é‡è¦)**:
4. FPSæ€§èƒ½æµ‹è¯•
5. 900Mbpsç½‘ç»œéªŒè¯

**P2 (åŠ åˆ†)**:
6. è¡ŒäººmAPéªŒè¯
7. é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•

---

**ç»“è®º**: ä»£ç readyï¼Œç¡¬ä»¶åˆ°ä½å**1å¤©å†…**å¯å®Œæˆå…¨éƒ¨éªŒè¯ã€‚
